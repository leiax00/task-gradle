group 'cn.leiax00'
version '1.0-SNAPSHOT'

// é…ç½®é˜¶æ®µæ‰§è¡Œè¾“å‡º: Hello World!!!
task helloWorld {
    println 'Hello World!!!'
}
tasks.create("helloWorld1").configure { println 'Hello World!!!' }

// =================================
// æ‰§è¡Œé˜¶æ®µè¾“å‡º: doFirst -> doLast
task helloWorld4Exec {
    doLast {
        println 'last: Hello World!!!'
    }
    doFirst {
        println 'first: Hello World!!!'
    }
}
// ç­‰æ•ˆ
tasks.create("helloWorld4Exec1").doFirst { println 'last: Hello World!!!' }.doLast { println 'first: Hello World!!!' }

// =================================
// æ‰€æœ‰é¡¹ç›®é…ç½®ç›¸åŒçš„ä»»åŠ¡, è®¾ç½®å…¬å…±å±žæ€§ðŸ®
allprojects {
    group = 'cn.leiax00'
    version = 'v1.0.0'
    task allProjectsTask {
        doLast { task ->
            println "allprojects: I'm $task.project.group.$task.project.name:$task.project.version"
        }
    }
}

// =================================
// æ‰€æœ‰å­é¡¹ç›®é…ç½®ç›¸åŒä»»åŠ¡
subprojects {
    repositories {
        mavenCentral()
    }
    dependencies {
//        testCompile "junit:junit:4.12"
    }
    task subprojectsTask {
        doLast { task ->
            println "- subprojects: I'm $task.project.group.$task.project.name:$task.project.version"
        }
    }
}

// =================================
// åœ¨æ ¹å·¥ç¨‹ä¸­æŒ‡å®šç‰¹å®šå·¥ç¨‹çš„é…ç½®
// ä¸€ä¸ªå·¥ç¨‹çš„è·¯å¾„ä¸ºï¼šä»¥å†’å·ï¼ˆ: å®ƒä»£è¡¨äº†æ ¹å·¥ç¨‹ï¼‰å¼€å§‹ï¼Œå†åŠ ä¸Šå·¥ç¨‹çš„åç§°ã€‚ä¾‹å¦‚â€œ:m1â€ã€‚
// ä¸€ä¸ªä»»åŠ¡çš„è·¯å¾„ä¸ºï¼šå·¥ç¨‹è·¯å¾„åŠ ä¸Šä»»åŠ¡åç§°ï¼Œä¾‹å¦‚â€œ:m1:specific4M1â€.
project(':m1').tasks.create("specific4M1") {
    doLast {
        println "- $project.name, I'm the specific project."
    }
}

// =================================
// ä»»åŠ¡ä¾èµ–
task t2 {
    println "$name: Hello world!"
}

task t1(dependsOn: t2) {
    println "$name: Hello world!"
}

// =================================
// å»¶è¿Ÿä¾èµ–
task t3(dependsOn: "t4") {
    doLast {
        println "$name: Hello world!"
    }
}

task t4 {
    doLast {
        println "$name: Hello world!"
    }
}

// =================================
// åŠ¨æ€ä»»åŠ¡
4.times { counter -> tasks.create("task$counter").configure { println "I'm task number $counter" } }
//task0.dependsOn(["task2", "task3"])
task0.dependsOn task2, task3

// =================================
// é€šè¿‡ API è¿›è¡Œä»»åŠ¡ä¹‹é—´çš„é€šä¿¡ - å¢žåŠ ä»»åŠ¡è¡Œä¸º
task addTaskAction {
    println '666666'
}
addTaskAction.doFirst { println 'this is first...' }
addTaskAction.doLast { println 'this is last...' }
addTaskAction { println 'this is configure...' }
